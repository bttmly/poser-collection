!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.collection=n()}}(function(){var define,module,exports;return function n(t,r,e){function i(o,c){if(!r[o]){if(!t[o]){var f="function"==typeof require&&require;if(!c&&f)return f(o,!0);if(u)return u(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var s=r[o]={exports:{}};t[o][0].call(s.exports,function(n){var r=t[o][1][n];return i(r?r:n)},s,s.exports,n,t,r,e)}return r[o].exports}for(var u="function"==typeof require&&require,o=0;o<e.length;o++)i(e[o]);return i}({1:[function(n,t){"use strict";function r(n){return n instanceof b}function e(n){return"function"==typeof n}function i(n){return"[object Array]"===Object.prototype.toString.call(n)}function u(){var n,t=arguments.length;if(0===t)return new b;if(1===t&&i(arguments[0]))return(new b).concat(arguments[0]);if(1===t&&"number"==typeof arguments[0])return new b(arguments[0]);n=new b(t);for(var r=0;r<n.length;r++)n[r]=arguments[r];return u(n)}function o(){return u(arguments[0])}function c(n){return(new b).concat(n).map(function(n){return i(n)?c(n):n})}function f(n){return u(Object.keys(n))}function a(n,t){return f(n).every(function(r){return t[r]===n[r]})}function s(n){return function(t,r){return n.call(this,r,t)}}function l(n){return function(t){return t[n]}}function h(n){return function(){return!n.apply(this,arguments)}}function p(n,t){return E.indexOf.call(n,t)>-1}function d(n){return!!n}function m(n){return n}function v(n){return null==n?m:e(n)?n:l(n)}function g(n){return n.reduce(function(n,t){return n.chainPush.apply(n,i(t)?g(t):[t])},new b)}function y(n,t){for(var r=new b(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];return r=r.slice(2),(e(t)?t:n[t]).apply(n,r)}function x(n,t){return t.map(function(t){return t.reduce(function(t,r,e){return t[n[e]]=r,t},{})})}var w=n("poser"),b=w.Array(),O=n("./fast")(b),E=b.prototype,j=s(p),C=O.partial;["push","pop","shift","unshift"].forEach(function(n){var t="chain"+n.charAt(0).toUpperCase()+n.slice(1),r=E[n];E[t]=function(){return r.apply(this,arguments),this}}),["forEach","map","reduce","reduceRight","filter","some","every","indexOf","lastIndexOf"].forEach(function(n){var t="native"+n.charAt(0).toUpperCase()+n.slice(1),r=E[n];delete E[n],E[t]=function(){return r.apply(this,arguments)}}),E.forEach=function(n,t){return O.forEach(this,n,t)},E.each=E.forEach,E.map=function(n,t){return O.map(this,n,t)},E.collect=E.map,E.reduce=function(n,t,r){return O.reduce(this,n,t,r)},E.reduceRight=function(n,t,r){return O.reduceRight(this,n,t,r)},E.filter=function(n,t){return this.reduce(function(r,e,i,u){return n.call(t,e,i,u)&&r.push(e),r},new b)},E.select=E.filter,E.indexOf=function(n){return O.indexOf(this,n)},E.lastIndexOf=function(n){return O.lastIndexOf(this,n)},E.some=function(n,t){return O.some(this,n,t)},E.every=function(n,t){return O.every(this,n,t)},E.forEachRight=function(n){this.slice().reverse().each(n)},E.eachRight=E.forEachRight,E.where=function(n){return this.filter(C(a,n))},E.whereNot=function(n){return this.filter(h(C(a,n)))},E.find=function(n){var t=null;return this.some(function(r,e,i){var u=n(r,e,i);return u?(t=r,!0):void 0}),t},E.findNot=function(n){return this.find(h(n))},E.findWhere=function(n){return this.find(C(a,n))},E.findWhereNot=function(n){return this.find(h(C(a,n)))},E.pluck=function(n){return this.map(l(n))},E.pick=function(){for(var n=new b(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];return this.map(function(t){var r={};return n.each(function(n){r[n]=t[n]}),r})},E.reject=function(n){return this.filter(h(n))},E.invoke=function(){return this.mapInvoke.apply(this,arguments),this},E.mapInvoke=function(){for(var n=new b(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];return this.map(function(t){return y.apply(null,[t].concat(n))})},E.without=function(){for(var n=new b(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];return this.reject(C(p,n))},E.remove=E.without,E.contains=function(n){return p(this,n)},E.tap=function(n){return n(this),this},E.clone=function(){return O.clone(this)},E.first=function(n){return null==n?this[0]:this.slice(0,n)},E.head=E.first,E.take=E.first,E.initial=function(n){return null==n&&(n=1),this.slice(0,this.length-n)},E.last=function(n){return null==n?this[this.length-1]:this.slice(0,-1*n)},E.rest=function(n){return null==n&&(n=1),this.slice(n)},E.tail=E.rest,E.drop=E.rest,E.compact=function(){return this.filter(d)},E.flatten=function(){return g(this)},E.partition=function(n){return this.reduce(function(t,r,e,i){return(n(r,e,i)?t[0]:t[1]).push(r),t},u(u(),u()))},E.union=function(){return E.concat.apply(this,arguments).unique()},E.intersection=function(){for(var n=new b(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];return this.filter(function(t){return n.every(C(j,t))})},E.difference=function(){for(var n=new b(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];return this.filter(function(t){return n.every(h(C(j,t)))})},E.unique=function(){return this.reduce(function(n,t){return n.contains(t)?n:n.chainPush(t)},new b)},E.uniq=E.unique,E.sortBy=function(n,t){return n=v(n),E.pluck.call(this.map(function(r,e,i){return{val:r,i:e,param:n.call(t,r,e,i)}}).sort(function(n,t){var r=n.param,e=t.param;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.i-t.i}),"val")},E.zip=function(){for(var n=new b(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];return n.chainUnshift(this).map(o).sortBy("length").last().map(function(t,r){return n.map(l(r))})},E.min=function(n){return n?E.min.call(this.pluck(n)):Math.min.apply(Math,this)},E.max=function(n){return n?E.max.call(this.pluck(n)):Math.max.apply(Math,this)},E.extent=function(n){return[this.min(n),this.max(n)]},E.toArray=function(){return[].concat(this)},E.toArrayDeep=function(){return this.toArray().map(function(n){return r(n)&&(n=n.toArrayDeep()),n})},E.asRowsOf=function(n){return x(n,this)},E.asHeadersOf=function(n){return n instanceof b||(n=u(n)),x(this,n)},u.ctor=b,u.proto=b.prototype,u.isCollection=r,u.isArrayish=i,u.one=o,u.deep=c,t.exports=u},{"./fast":2,poser:5}],2:[function(n,t){"use strict";function r(n,t){return function(r,e,i){return n.call(t,r,e,i)}}function e(n,t){return function(r,e,i,u){return n.call(t,r,e,i,u)}}function i(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2]);case 4:return n.call(t,r[0],r[1],r[2],r[3]);case 5:return n.call(t,r[0],r[1],r[2],r[3],r[4]);case 6:return n.call(t,r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return n.call(t,r[0],r[1],r[2],r[3],r[4],r[5],r[6]);case 8:return n.call(t,r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]);default:return n.apply(t,r)}}t.exports=function(n){return{forEach:function(n,t,e){var i,u=n.length,o=void 0!==e?r(t,e):t;for(i=0;u>i;i++)o(n[i],i,n)},map:function(t,e,i){var u,o=t.length,c=new n(o),f=void 0!==i?r(e,i):e;for(u=0;o>u;u++)c[u]=f(t[u],u,t);return c},filter:function(t,e,i){var u,o=t.length,c=new n,f=void 0!==i?r(e,i):e;for(u=0;o>u;u++)f(t[u],u,t)&&c.push(t[u]);return c},reduce:function(n,t,r,i){var u,o,c=n.length,f=void 0!==i?e(t,i):t;for(void 0===r?(u=1,o=n[0]):(u=0,o=r);c>u;u++)o=f(o,n[u],u,n);return o},reduceRight:function(n,t,r,i){var u,o,c=n.length,f=void 0!==i?e(t,i):t;for(void 0===r?(u=c-2,o=n[c-1]):(u=c-1,o=r);u>=0;u--)o=f(o,n[u],u,n);return o},indexOf:function(n,t,r){var e=n.length,i=0;for("number"==typeof r&&(i=r,0>i&&(i+=e,0>i&&(i=0)));e>i;i++)if(n[i]===t)return i;return-1},lastIndexOf:function(n,t,r){var e=n.length,i=e-1;for("number"==typeof r&&(i=r,0>i&&(i+=e));i>=0;i--)if(n[i]===t)return i;return-1},some:function(n,t,e){var i,u=n.length,o=void 0!==e?r(t,e):t;for(i=0;u>i;i++)if(o(n[i],i,n))return!0;return!1},every:function(n,t,e){var i,u=n.length,o=void 0!==e?r(t,e):t;for(i=0;u>i;i++)if(!o(n[i],i,n))return!1;return!0},partial:function(t){var r,e=arguments.length-1;r=new n(e);for(var u=0;e>u;u++)r[u]=arguments[u+1];return function(){var u,o=arguments.length,c=new n(e+o);for(u=0;e>u;u++)c[u]=r[u];for(u=0;o>u;u++)c[e+u]=arguments[u];return i(t,this,c)}}}}},{}],3:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var r in n)t.push(r);return t},forEach=function(n,t){if(n.forEach)return n.forEach(t);for(var r=0;r<n.length;r++)t(n[r],r,n)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(n,t,r){Object.defineProperty(n,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(n){return function(n,t,r){n[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(n){return this instanceof Script?void(this.code=n):new Script(n)};Script.prototype.runInContext=function(n){if(!(n instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,e=r.eval,i=r.execScript;!e&&i&&(i.call(r,"null"),e=r.eval),forEach(Object_keys(n),function(t){r[t]=n[t]}),forEach(globals,function(t){n[t]&&(r[t]=n[t])});var u=Object_keys(r),o=e.call(r,this.code);return forEach(Object_keys(r),function(t){(t in n||-1===indexOf(u,t))&&(n[t]=r[t])}),forEach(globals,function(t){t in n||defineProp(n,t,r[t])}),document.body.removeChild(t),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(n){var t=Script.createContext(n),r=this.runInContext(t);return forEach(Object_keys(t),function(r){n[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(n){exports[n]=Script[n]=function(t){var r=Script(t);return r[n].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(n){return exports.Script(n)},exports.createContext=Script.createContext=function(n){var t=new Context;return"object"==typeof n&&forEach(Object_keys(n),function(r){t[r]=n[r]}),t}},{indexof:4}],4:[function(n,t){var r=[].indexOf;t.exports=function(n,t){if(r)return n.indexOf(t);for(var e=0;e<n.length;++e)if(n[e]===t)return e;return-1}},{}],5:[function(n,t){function r(n){e[n]=function(){return e(n)}}var e=n("./src/node");t.exports=e,["Array","Function","Object","Date","String"].forEach(r)},{"./src/node":6}],6:[function(n,t){"use strict";function r(n){var t={};return e.runInNewContext("stolen="+n+";",t,"poser.vm"),t.stolen}var e=n("vm");t.exports=r},{vm:3}],7:[function(n,t){t.exports=n("./lib/collection.js")},{"./lib/collection.js":1}]},{},[7])(7)});